<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Maze Game</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background-color: #f0f0f0;
        margin: 0;
        padding: 20px;
    }
    .maze-container {
        display: flex;
        justify-content: center;
    }
    .maze {
        display: grid;
        grid-template-columns: repeat(15, 30px);
        grid-template-rows: repeat(15, 30px);
        gap: 1px;
        border: 2px solid #333;
    }
    .cell {
        background-color: #c0c0c0;
        border: 2px solid #606060;
    }
    .wall {
        background-color: #606060;
    }
    .exit {
        background-color: #00cc00;
        background-image: url('https://emojicdn.elk.sh/ðŸšª');
        background-size: cover;
    }
    .player {
        background-color: #ffcc00;
        background-image: url('https://emojicdn.elk.sh/ðŸ¤–');
        background-size: cover;
    }
    .enemy {
        background-color: #ff0000;
        background-image: url('https://emojicdn.elk.sh/ðŸ‘¾');
        background-size: cover;
    }
    h1 {
        color: #333;
    }
    p {
        color: #666;
        margin-bottom: 20px;
    }
</style>
</head>
<body>
<h1>Maze Game</h1>
<p>Use arrow keys to navigate. Avoid enemies and find the exit!</p>
<div class="maze-container">
    <div class="maze" id="maze"></div>
</div>
<script>
    const ROWS = 15;
    const COLS = 15;
    const NUM_ENEMIES = 3;
    const WALL_DENSITY = 0.3;

    let maze = [];
    let playerPos = { row: 0, col: 0 };
    let enemies = [];

    function createMaze() {
        let mazeDiv = document.getElementById("maze");

        // Initialize maze grid with walls
        for (let i = 0; i < ROWS; i++) {
            let row = [];
            for (let j = 0; j < COLS; j++) {
                let cellDiv = document.createElement("div");
                cellDiv.classList.add("cell", "wall");
                mazeDiv.appendChild(cellDiv);
                row.push(cellDiv);
            }
            maze.push(row);
        }

        // Generate maze using recursive backtracking
        let startRow = Math.floor(Math.random() * ROWS);
        let startCol = Math.floor(Math.random() * COLS);
        maze[startRow][startCol].classList.remove("wall");
        maze[startRow][startCol].classList.add("path");
        recursiveBacktracking(startRow, startCol);

        // Set exit
        maze[ROWS - 1][COLS - 1].classList.remove("wall");
        maze[ROWS - 1][COLS - 1].classList.add("exit");

        // Set player position
        maze[playerPos.row][playerPos.col].classList.add("player");

        // Create enemies
        for (let i = 0; i < NUM_ENEMIES; i++) {
            let enemy = { row: Math.floor(Math.random() * ROWS), col: Math.floor(Math.random() * COLS) };
            enemies.push(enemy);
            maze[enemy.row][enemy.col].classList.add("enemy");
        }
    }

    function recursiveBacktracking(row, col) {
        let directions = shuffleDirections();

        for (let dir of directions) {
            let newRow = row + dir[0] * 2;
            let newCol = col + dir[1] * 2;

            if (newRow >= 0 && newRow < ROWS && newCol >= 0 && newCol < COLS && maze[newRow][newCol].classList.contains("wall")) {
                maze[row + dir[0]][col + dir[1]].classList.remove("wall");
                maze[newRow][newCol].classList.remove("wall");
                recursiveBacktracking(newRow, newCol);
            }
        }
    }

    function shuffleDirections() {
        let directions = [[-1, 0], [1, 0], [0, -1], [0, 1]];
        for (let i = directions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [directions[i], directions[j]] = [directions[j], directions[i]];
        }
        return directions;
    }

    function moveEnemies() {
        for (let enemy of enemies) {
            let newRow = enemy.row + Math.floor(Math.random() * 3) - 1;
            let newCol = enemy.col + Math.floor(Math.random() * 3) - 1;

            if (newRow >= 0 && newRow < ROWS && newCol >= 0 && newCol < COLS &&
                !maze[newRow][newCol].classList.contains("wall") &&
                !maze[newRow][newCol].classList.contains("enemy")) {
                maze[enemy.row][enemy.col].classList.remove("enemy");
                enemy.row = newRow;
                enemy.col = newCol;
                maze[enemy.row][enemy.col].classList.add("enemy");
            }
        }
    }

    function movePlayer(direction) {
        let newRow = playerPos.row;
        let newCol = playerPos.col;

        switch (direction) {
            case "up":
                newRow--;
                break;
            case "down":
                newRow++;
                break;
            case "left":
                newCol--;
                break;
            case "right":
                newCol++;
                break;
        }

        if (newRow >= 0 && newRow < ROWS && newCol >= 0 && newCol < COLS &&
            !maze[newRow][newCol].classList.contains("wall") &&
            !maze[newRow][newCol].classList.contains("enemy")) {
            maze[playerPos.row][playerPos.col].classList.remove("player");
            playerPos.row = newRow;
            playerPos.col = newCol;
            maze[playerPos.row][playerPos.col].classList.add("player");

            if (maze[playerPos.row][playerPos.col].classList.contains("exit")) {
                alert("Congratulations! You found the exit!");
                resetGame();
            }
        }
    }

    function resetGame() {
        maze = [];
        playerPos = { row: 0, col: 0 };
        enemies = [];
        document.getElementById("maze").innerHTML = "";
        createMaze();
    }

    document.addEventListener("keydown", function(event) {
        switch (event.key) {
            case "ArrowUp":
                movePlayer("up");
                moveEnemies();
                break;
            case "ArrowDown":
                movePlayer("down");
                moveEnemies();
                break;
            case "ArrowLeft":
                movePlayer("left");
                moveEnemies();
                break;
            case "ArrowRight":
                movePlayer("right");
                moveEnemies();
                break;
        }
    });

    // Start the game
    createMaze();
</script>
</body>
</html>
